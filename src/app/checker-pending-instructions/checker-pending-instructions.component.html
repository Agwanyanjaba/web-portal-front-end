<app-partials></app-partials>

<div class="content-page">
  <!-- Start content -->
  <div class="content">
    <div class="col-xs-12">
      <div class="page-title-box">
        <h4 class="page-title">Checker Settlement Instructions</h4>
        <ol class="breadcrumb p-0 m-0">
          <li>
            <a href="#">ITTS Portal</a>
          </li>
          <li class="active">
            Checker Settlement Instructions
          </li>
        </ol>
        <div class="clearfix"></div>
      </div>
    </div>

    <div class="container">

      <div class="row">
        <div class="col-sm-12">
          <div class="card-box table-responsive">
            <h4 class="m-t-0 header-title"><b></b></h4>

            <!--<div id="datatable_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="datatable_length"><label>Show <select name="datatable_length" aria-controls="datatable" class="form-control input-sm" [(ngModel)]="PageSize"><option value="10">10</option><option value="25">25</option><option value="50">50</option><option value="100">100</option></select> entries</label></div></div><div class="col-sm-6"><div id="datatable_filter" class="dataTables_filter">-->
            <!--<label>Search: <input class="form-control" type="text" name="search" [(ngModel)]="merchants"></label></div></div></div><div class="row"><div class="col-sm-12"><table id="datatable" class="table table-striped table-colored table-info dataTable no-footer" role="grid" aria-describedby="datatable_info">-->
            <!--<thead>-->

            <!--<form class="form-horizontal" action="#">-->
            <!--<table class="table">-->
            <!--<thead>-->
            <!--<tr role="row" class="heading">-->
            <!--&lt;!&ndash;<th width="15%"> Merchant Name </th>&ndash;&gt;-->
            <!--&lt;!&ndash;<th width="15%"> Merchant Code </th>&ndash;&gt;-->
            <!--&lt;!&ndash;<th width="10%"> Email </th>&ndash;&gt;-->
            <!--</tr>-->
            <!--</thead>-->

            <!--<tbody>-->

            <!--<tr role="row" class="filter">-->
            <!--<td>-->
            <!--<div class="form-group ">-->
            <!--<div class="col-xs-12">-->
            <!--<input class="form-control" type="text" required="" placeholder="Merchant Name"  [(ngModel)]="search.merchantName" name="merchantName">-->
            <!--</div>-->
            <!--</div>-->
            <!--</td>-->

            <!--<td>-->
            <!--<div class="form-group ">-->
            <!--<div class="col-xs-12">-->
            <!--<input class="form-control" type="text" required="" placeholder="Merchant Code"  [(ngModel)]="search.merchantCode" name="merchantCode">-->
            <!--</div>-->
            <!--</div>-->
            <!--</td>-->

            <!--<td>-->
            <!--<div class="form-group ">-->
            <!--<div class="col-xs-12">-->
            <!--<input class="form-control" type="text" required="" placeholder="Merchant Email"  [(ngModel)]="search.merchantEmailAddress" name="merchantEmailAddress">-->
            <!--</div>-->
            <!--</div>-->
            <!--</td>-->
            <!--<td>-->
            <!--<button type="button" class="btn waves-effect waves-light btn-custom" style="margin-right: 12px;" (click)="searchMerchantDetails(search)"><i class="fa fa-search m-r-5"></i> Search</button>-->
            <!--<button type="button" class="btn waves-effect waves-light btn-custom" (click)="resetSearch()"><i class="fa fa-refresh m-r-5"></i> Reset</button>-->
            <!--</td>-->

            <!--</tr>-->
            <!--</tbody>-->

            <!--</table>-->
            <!--</form>-->

            <div id="datatable_wrapper" class="dataTables_wrapper form-inline dt-bootstrap no-footer"><div class="row"><div class="col-sm-6"><div class="dataTables_length" id="datatable_length"></div></div><div class="col-sm-6"><div id="datatable_filter" class="dataTables_filter">
              <!--<label>Search: <input class="form-control" type="text" name="search" [(ngModel)]="merchants"></label>-->
            </div></div></div><div class="row"><div class="col-sm-12">

              <table id="datatable" class="table table-striped  table-colored table-info dataTable no-footer" role="grid" aria-describedby="datatable_info">
                <thead>
                <tr role="row">
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending">Settlement RefNo</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending">Pay Ref No</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending">Sales Invoice</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending">Lot No</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending">Producer Code</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Start date: activate to sort column ascending">Broker Code</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending">Created On</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending">Status</th>
                  <th  tabindex="0" aria-controls="datatable" rowspan="1" colspan="1" aria-label="Salary: activate to sort column ascending">ACTION</th>
                </tr>
                </thead>

                <tbody>

                <span *ngIf="!settlementInstructionsList"> <img src="../../../assets/images/loader.gif" style="width: 25%;margin-left:100%; margin-top: 10%"></span>

                <tr role="row" class="odd" *ngFor="let instruction of settlementInstructionsList |  paginate: { itemsPerPage: 10, currentPage: p, totalItems: totalItems}; " [ngSwitch]="instruction.status">
                  <td>{{instruction.settlementRefNo}}</td>
                  <td>{{instruction.payRefNo}}</td>
                  <td>{{instruction.saleInvoiceNumber}}</td>
                  <td>{{instruction.lotNo}}</td>
                  <td>{{instruction.producerBusinessCode}}</td>
                  <td>{{instruction.buyerBidBusinessCode}}</td>
                  <td>{{instruction.createdOn}}</td>
                  <td *ngSwitchCase="0"> <span class="label label-success">Approved</span></td>
                  <td *ngSwitchCase="1"><span class="label label-danger">  Pending</span></td>
                  <td *ngSwitchCase="2"><span class="label label-danger">  Pending</span></td>

                  <td class=" dropdown">
                    <button class="btn btn-xs  dropdown-toggle btn-action"  data-toggle="dropdown" aria-expanded="false" style="height:30px; margin-top: 0; padding: 0 20px 0 20px !important; background-color: #706db7;
                        color: white;" type="button"> Actions
                      <i class="glyphicon glyphicon-menu-down"></i>
                    </button>
                    <ul class="dropdown-menu btn-drop-down" role="menu">
                      <!--<li>-->
                        <!--<a data-toggle="modal" href="#settlement-approve-modal" style="cursor: pointer;" (click)="setPayRefNo(instruction.payRefNo)">-->
                          <!--<i class="glyphicon glyphicon-ok-sign"></i> Approve </a>-->
                      <!--</li>-->
                      <!--<li>-->
                        <!--<a data-toggle="modal" href="#blockRequest">-->
                          <!--<i class="glyphicon glyphicon-minus-sign"></i> Block </a>-->
                      <!--</li>-->

                      <!--<li>-->
                        <!--<a data-toggle="modal" href="#deleteRequest">-->
                          <!--<i class="glyphicon glyphicon-remove-sign"></i> Delete </a>-->
                      <!--</li>-->

                      <li>
                        <a   [routerLink]="['/settlement/instruction/details/',instruction.payRefNo]">
                          <i class="mdi mdi-eye"></i> View </a>
                      </li>

                    </ul>
                  </td>

                </tr>

                </tbody>
              </table></div></div>
              <div class="row"><div class="col-sm-6"><div class="dataTables_info" id="datatable_info" role="status" aria-live="polite">Showing 1 to 10 of {{allElements}} entries</div></div><div class="col-sm-6">
                <div class="dataTables_paginate paging_simple_numbers" id="datatable_paginate"><ul class="pagination">
                  <li class="paginate_button previous disabled" aria-controls="datatable" tabindex="0" id="datatable_previous">
                    <pagination-controls
                      (pageChange)="p = $event"
                      (pageChange)="pageChanged($event)"
                      responsive="true"
                      previousLabel="Previous"
                      nextLabel="Next">
                    </pagination-controls>
                </ul></div></div></div></div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<div id="settlement-approve-modal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h4 class="modal-title modal-txt">Approve Settlement Instruction</h4>
      </div>
      <div class="modal-body">
        <div class="row">
          <h4>Are you sure you want to approve this Instruction ?</h4>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn w-md btn-bordered btn-danger waves-effect waves-light" data-dismiss="modal">Close</button>
          <span><span *ngIf="loadingbtn === false"><button class="btn w-md btn-bordered btn-danger waves-effect waves-light" type="submit" (click)="approveSettlement()" data-dismiss="modal"> Approve</button></span></span>
          <span *ngIf="loadingbtn === true"><button class="ui primary loading button btn w-md btn-bordered btn-danger waves-effect waves-light">Loading</button></span>
        </div>
      </div>
    </div>
  </div><!-- /.modal -->
</div>
